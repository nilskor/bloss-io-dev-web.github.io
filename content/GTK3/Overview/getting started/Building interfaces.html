
<div class="gridContainer slicedAs_3c151 doco">

    <div></div>
    <div>
<!-- article header "section-header" -->
  <section class="section-header">
    <div class="generic-box-toc">
        <h1><font color="#2e3440">Building user interfaces</font></h1>
    </div>
    <div class="generic-box-toct">
        <h3><font color="#2e3440">When construcing a more complicated user interface, with dozens or hundreds of widgets, 
                doing all the setup work in C code is cumbersome, and making changes becomes next to impossible.<br>
                <br>
                Thankfully, GTK+ supports the separation of user interface layout from your business logic, 
                by using UI descriptions in an XML format that can be parsed by the 
                <a class="two" href="/content/GTK3/GTK_Widgets_Objects/Interface_builder/GtkBuilder.html">GtkBuilder</a> class.</font></h3>
    </div>
  </section>

 <!-- TOC toggle script -->
  <script>
    var toc = document.getElementById("toc")
    var toggle = document.getElementById("toggle")

    function toggleTOC()
    {
        toc.style.display === "initial" ? ( toc.style.setProperty("display", "none"),
                                            toggle.innerHTML = "show"
                                            ) 
                                            : ( toc.style.setProperty("display", "initial"),
                                            toggle.innerHTML = "hide"
                                            )
    }    
  </script>

 <hr class="thin">

 <!-- article body "article-main" -->
  <article class="article-main">
      <div class="generic-box-main">
          <p>
              <span style= "font-size: 1.17em; font-weight: 700;">Example 3. Packing buttons with GtkBuilder</span><br>
              <br>
              Create a new file with the following content named example-3.c.
          </p>
      </div>
      <div class="generic-box-code">
          <pre class="programlisting">#include &lt;gtk/gtk.h&gt;

static void
print_hello (GtkWidget *widget,
             gpointer   data)
{
  g_print ("Hello World\n");
}

int
main (int   argc,
      char *argv[])
{
  GtkBuilder *builder;
  GObject *window;
  GObject *button;
  GError *error = NULL;

  gtk_init (&amp;argc, &amp;argv);

  /* Construct a GtkBuilder instance and load our UI description */
  builder = gtk_builder_new ();
  if (gtk_builder_add_from_file (builder, "builder.ui", &amp;error) == 0)
    {
      g_printerr ("Error loading file: %s\n", error-&gt;message);
      g_clear_error (&amp;error);
      return 1;
    }

  /* Connect signal handlers to the constructed widgets. */
  window = gtk_builder_get_object (builder, "window");
  g_signal_connect (window, "destroy", G_CALLBACK (gtk_main_quit), NULL);

  button = gtk_builder_get_object (builder, "button1");
  g_signal_connect (button, "clicked", G_CALLBACK (print_hello), NULL);

  button = gtk_builder_get_object (builder, "button2");
  g_signal_connect (button, "clicked", G_CALLBACK (print_hello), NULL);

  button = gtk_builder_get_object (builder, "quit");
  g_signal_connect (button, "clicked", G_CALLBACK (gtk_main_quit), NULL);

  gtk_main ();

  return 0;
}
          </pre>
      </div> 
      <div class="generic-box-main2">
          <p>
              Create a new file with the following content named builder.ui.
          </p>
      </div>
      <div class="generic-box-code">
          <pre class="programlisting">&lt;interface&gt;
  &lt;object id="window" class="GtkWindow"&gt;
    &lt;property name="visible"&gt;True&lt;/property&gt;
    &lt;property name="title"&gt;Grid&lt;/property&gt;
    &lt;property name="border-width"&gt;10&lt;/property&gt;
    &lt;child&gt;
      &lt;object id="grid" class="GtkGrid"&gt;
        &lt;property name="visible"&gt;True&lt;/property&gt;
        &lt;child&gt;
          &lt;object id="button1" class="GtkButton"&gt;
            &lt;property name="visible"&gt;True&lt;/property&gt;
            &lt;property name="label"&gt;Button 1&lt;/property&gt;
          &lt;/object&gt;
          &lt;packing&gt;
            &lt;property name="left-attach"&gt;0&lt;/property&gt;
            &lt;property name="top-attach"&gt;0&lt;/property&gt;
          &lt;/packing&gt;
        &lt;/child&gt;
        &lt;child&gt;
          &lt;object id="button2" class="GtkButton"&gt;
            &lt;property name="visible"&gt;True&lt;/property&gt;
            &lt;property name="label"&gt;Button 2&lt;/property&gt;
          &lt;/object&gt;
          &lt;packing&gt;
            &lt;property name="left-attach"&gt;1&lt;/property&gt;
            &lt;property name="top-attach"&gt;0&lt;/property&gt;
          &lt;/packing&gt;
        &lt;/child&gt;
        &lt;child&gt;
          &lt;object id="quit" class="GtkButton"&gt;
            &lt;property name="visible"&gt;True&lt;/property&gt;
            &lt;property name="label"&gt;Quit&lt;/property&gt;
          &lt;/object&gt;
          &lt;packing&gt;
            &lt;property name="left-attach"&gt;0&lt;/property&gt;
            &lt;property name="top-attach"&gt;1&lt;/property&gt;
            &lt;property name="width"&gt;2&lt;/property&gt;
          &lt;/packing&gt;
        &lt;/child&gt;
      &lt;/object&gt;
      &lt;packing&gt;
      &lt;/packing&gt;
    &lt;/child&gt;
  &lt;/object&gt;
&lt;/interface&gt;
          </pre>
      </div>
      <div class="generic-box-main3">
          <p>
              You can compile the program above with GCC using:
          </p>
      </div>
      <div class="generic-box-code"><p><br>
        <code class="line">
            gcc `pkg-config --cflags gtk+-3.0` -o example-3 example-3.c `pkg-config --libs gtk+-3.0`
        </code><br>
      </p></div>
      <div class="generic-box-space">
          <p>
              Note that GtkBuilder can also be used to construct objects that are not widgets, such as tree models, adjustments, etc. 
              That is the reason the method we use here is called 
              <a class="two" href="/content/GTK3/GTK_Widgets_Objects/Interface_builder/GtkBuilder.html#gtk_builder_get_object"><code class="function">gtk_builder_get_object()</code></a> 
              and returns a GObject* instead of a GtkWidget*.<br>
              <br>
              Normally, you would pass a full path to 
              <a class="two" href="/content/GTK3/GTK_Widgets_Objects/Interface_builder/GtkBuilder.html#gtk_builder_add_from_file"><code class="function">gtk_builder_add_from_file()</code></a> 
              to make the execution of your program independent of the current directory. 
              A common location to install UI descriptions and similar data is 
              <code class="filename">/usr/share/<em class="replaceable"><code>appname</code></em></code>.<br>
              <br>
              It is also possible to embed the UI description in the source code as a string and use 
              <a class="two" href="/content/GTK3/GTK_Widgets_Objects/Interface_builder/GtkBuilder.html#gtk_builder_add_from_string"><code class="function">gtk_builder_add_from_string()</code></a> 
              to load it. But keeping the UI description in a separate file has several advantages: 
              It is then possible to make minor adjustments to the UI without recompiling your program, 
              and, more importantly, graphical UI editors such as <a class="two" href="http://glade.gnome.org">glade</a> 
              can load the file and allow you to create and modify your UI by point-and-click.
          </p>
      </div>
  </article>

 
    </div>
    <div></div>

</div>
